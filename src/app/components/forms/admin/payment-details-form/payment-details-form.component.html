<div class="w-full h-full flex flex-col">
  <h6 class="text-2xl font-light text-black py-1">
    {{ "patDetReport.title" | translate }}
  </h6>
  <mat-divider class="w-full"></mat-divider>
  <div class="flex flex-col w-full">
    <form class="flex flex-col w-full space-y-2 py-2">
      <div class="grid grid-cols-1 lg:grid-cols-2 w-full gap-2">
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.zone" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [formControl]="zone"
              [placeholder]="'patDetReport.form.placeholders.zone' | translate"
            >
              <mat-option
                *ngFor="let zoneItem of templateData.zoneList$ | async"
                [value]="zoneItem.value"
              >
                {{ zoneItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.school" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [placeholder]="
                'patDetReport.form.placeholders.school' | translate
              "
              [formControl]="school"
            >
              <mat-option
                *ngFor="let schoolItem of templateData.schoolList$ | async"
                [value]="schoolItem.value"
              >
                {{ schoolItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.fee" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [formControl]="fee"
              [placeholder]="'patDetReport.form.placeholders.fee' | translate"
            >
              <mat-option
                *ngFor="let feesItem of templateData.feesList$ | async"
                [value]="feesItem.value"
              >
                {{ feesItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.class" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [placeholder]="'patDetReport.form.placeholders.class' | translate"
              [formControl]="paymentClass"
            >
              <mat-option
                *ngFor="let classItem of templateData.paymentClasses$ | async"
                [value]="classItem.value"
              >
                {{ classItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.steamCombination" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [placeholder]="
                'patDetReport.form.placeholders.steamCombination' | translate
              "
              [formControl]="stream"
            >
              <mat-option
                *ngFor="let streamItem of templateData.streamList$ | async"
                [value]="streamItem.value"
              >
                {{ streamItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.admissionNo" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <input
              matInput
              [placeholder]="
                'patDetReport.form.placeholders.admissionNo' | translate
              "
              [formControl]="admissionNo"
            />
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.referenceNo" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <input
              matInput
              [placeholder]="
                'patDetReport.form.placeholders.referenceNo' | translate
              "
              [formControl]="referenceNo"
            />
          </mat-form-field>
        </div>
        <div class="flex flex-col w-full">
          <h6 class="text-xs font-semibold text-black">
            {{ "patDetReport.form.labels.currency" | translate }}
          </h6>
          <mat-form-field class="w-full" appearance="outline">
            <mat-select
              [placeholder]="
                'patDetReport.form.placeholders.currency' | translate
              "
              [formControl]="currency"
            >
              <mat-option
                *ngFor="let currencyItem of templateData.currencies$ | async"
                [value]="currencyItem.value"
              >
                {{ currencyItem.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div
          class="flex flex-col lg:flex-row items-center w-full col-span-full space-x-2"
        >
          <div class="flex flex-col w-full">
            <h6 class="text-xs font-semibold text-black">
              {{ "patDetReport.form.labels.dateFrom" | translate }}
            </h6>
            <mat-form-field appearance="outline">
              <input
                [placeholder]="
                  'patDetReport.form.placeholders.dateFrom' | translate
                "
                matInput
                [matDatepicker]="startDate"
                class="placeholder:pt-2"
                [formControl]="dateFrom"
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="startDate"
              ></mat-datepicker-toggle>
              <mat-datepicker #startDate></mat-datepicker>
              <mat-error>
                {{ "patDetReport.form.errors.dateFrom" | translate }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="flex flex-col w-full">
            <h6 class="text-xs font-semibold text-black">
              {{ "patDetReport.form.labels.dateTo" | translate }}
            </h6>
            <mat-form-field appearance="outline">
              <input
                [placeholder]="
                  'patDetReport.form.placeholders.dateTo' | translate
                "
                matInput
                [matDatepicker]="endDate"
                class="placeholder:mt-2"
                [formControl]="dateTo"
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="endDate"
              ></mat-datepicker-toggle>
              <mat-datepicker #endDate></mat-datepicker>
              <mat-error>
                {{ "patDetReport.form.errors.dateTo" | translate }}
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="flex flex-row items-center w-full justify-end space-x-1">
        <button
          (click)="viewReportClicked($event)"
          mat-flat-button
          color="primary"
          type="button"
          class="flex flex-row items-center"
        >
          <h6 class="text-sm">
            {{ "patDetReport.actions.viewReport" | translate }}
          </h6>
        </button>
        <button
          (click)="downloadPdfClicked($event)"
          mat-stroked-button
          color="primary"
          type="button"
        >
          <h6 class="text-sm">
            {{ "patDetReport.actions.downloadPdf" | translate }}
          </h6>
        </button>
        <button
          (click)="downloadExcelClicked($event)"
          mat-stroked-button
          color="primary"
          type="button"
        >
          <h6 class="text-sm">
            {{ "patDetReport.actions.downloadExcel" | translate }}
          </h6>
        </button>
      </div>
    </form>
    <div
      *ngIf="dataSource.data.length > 0"
      [formGroup]="tableFormGroup"
      class="relative w-full flex flex-col"
    >
      <div class="w-full relative flex flex-row items-center justify-between">
        <div class="relative">
          <input
            type="search"
            class="relative pl-8 m-0 block w-full lg:w-96 min-w-0 flex-auto rounded border border-solid border-neutral-300 bg-transparent bg-clip-padding py-[0.25rem] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-neutral-500 focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none"
            id="exampleSearch"
            [placeholder]="'defaults.search' | translate"
            [formControl]="tableSearch"
          />
          <span class="absolute top-1/2 left-2 -translate-y-1/2">
            <mat-icon matPrefix svgIcon="search"></mat-icon>
          </span>
        </div>
      </div>
      <div class="flex flex-col relative">
        <div class="overflow-x-auto hidden md:flex flex-col relative">
          <div class="inline-block min-w-full py-2">
            <div class="overflow-y-auto">
              <table
                mat-table
                matSort
                [dataSource]="dataSource"
                matTableExporter
                class="mat-elevation-z2 w-full"
              >
                <ng-container matColumnDef="0">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.sno" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["0"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="1">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.class" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["1"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="2">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.stream" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["2"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="3">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.date" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["3"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="4">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.admission" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["4"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="5">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-full"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.studentName" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["5"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="6">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.payerName" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["6"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="7">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.fee" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["7"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="8">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.term" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["8"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="9">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.paidAmount" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["9"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="10">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.referenceNo" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["10"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="11">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{
                      "patDetReport.tableColumns.transactionChannel" | translate
                    }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["11"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="12">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.receiptNo" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["12"] }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="13">
                  <th
                    class="!bg-neutral-100 text-neutral-800 text-sm !font-semibold py-2 w-fit"
                    mat-header-cell
                    *matHeaderCellDef
                  >
                    {{ "patDetReport.tableColumns.currency" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element" class="w-full">
                    {{ element["13"] }}
                  </td>
                </ng-container>
                <tr
                  mat-header-row
                  *matHeaderRowDef="tableDisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="
                    let row;
                    columns: tableDisplayedColumns;
                    index as i
                  "
                ></tr>
                <tr class="mat-row" *matNoDataRow>
                  <td
                    class="mat-cell"
                    [attr.colspan]="tableDisplayedColumns.length"
                  >
                    <p
                      *ngIf="dataSource.data.length > 0"
                      class="text-xs lg:text-sm py-2 px-4"
                    >
                      {{ "defaults.errors.noDataMatchingFilter" | translate }}
                      <span class="font-semibold"
                        >"{{ tableSearch.value }}"</span
                      >
                    </p>
                    <p
                      *ngIf="dataSource.data.length <= 0"
                      class="text-center text-sm tracking-wide pt-3 pb-1"
                    >
                      {{ "patDetReport.noDataFound" | translate }}
                    </p>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
